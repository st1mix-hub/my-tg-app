let balance = 1000;
let spinning = false;

const symbols = ['ğŸ’', 'ğŸ‹', 'â­', 'ğŸ’', '7ï¸âƒ£'];

const balanceEl = document.getElementById('balance');
const slot1 = document.getElementById('slot1');
const slot2 = document.getElementById('slot2');
const slot3 = document.getElementById('slot3');
const spinBtn = document.getElementById('spinBtn');
const betInput = document.getElementById('bet');
const messageEl = document.getElementById('message');

spinBtn.addEventListener('click', spin);

function spin() {
    if (spinning) return;
    
    let bet = Number(betInput.value);
    
    if (bet < 1 || bet > balance) {
        messageEl.textContent = 'âŒ ĞĞµĞ²ĞµÑ€Ğ½Ğ°Ñ ÑÑ‚Ğ°Ğ²ĞºĞ°';
        return;
    }
    
    spinning = true;
    spinBtn.disabled = true;
    balance -= bet;
    balanceEl.textContent = balance;
    
    slot1.classList.add('spinning');
    slot2.classList.add('spinning');
    slot3.classList.add('spinning');
    
    let count = 0;
    const interval = setInterval(() => {
        slot1.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        slot2.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        slot3.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        count++;
        
        if (count >= 15) {
            clearInterval(interval);
            finish();
        }
    }, 80);
    
    function finish() {
        const r1 = symbols[Math.floor(Math.random() * symbols.length)];
        const r2 = symbols[Math.floor(Math.random() * symbols.length)];
        const r3 = symbols[Math.floor(Math.random() * symbols.length)];
        
        slot1.textContent = r1;
        slot2.textContent = r2;
        slot3.textContent = r3;
        
        slot1.classList.remove('spinning');
        slot2.classList.remove('spinning');
        slot3.classList.remove('spinning');
        
        let win = 0;
        let msg = '';
        
        if (r1 === r2 && r2 === r3) {
            win = bet * (r1 === 'ğŸ’' ? 50 : 10);
            msg = 'ğŸ‰ Ğ”Ğ–Ğ•ĞšĞŸĞĞ¢!';
        } else if (r1 === r2 || r1 === r3 || r2 === r3) {
            win = bet * 2;
            msg = 'ğŸ‘ ĞĞµĞ¿Ğ»Ğ¾Ñ…Ğ¾!';
        } else {
            msg = 'ğŸ˜¢ ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ĞµÑ‰Ñ‘';
        }
        
        if (win > 0) {
            balance += win;
            balanceEl.textContent = balance;
            messageEl.textContent = `${msg} +${win} ğŸª™`;
        } else {
            messageEl.textContent = msg;
        }
        
        spinning = false;
        spinBtn.disabled = false;
    }
}
